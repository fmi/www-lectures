<!DOCTYPE html><html lang="bg"><head><meta charset="utf-8" /><!--[if lt IE 9]><script src="js/html5shim.js"></script><![endif]--><link href="css/styles.css" rel="stylesheet" /><link href="css/pygments.css" rel="stylesheet" /><script src="js/analytics.js"></script><title>02. Форми</title></head><body><header><h1>02. Форми</h1><nav><ul><li><button id="prev-btn" title="Previous slide">Previous Slide</button></li><li><span id="slide-number"></span> / <span id="slide-total"></span></li><li><button id="next-btn" title="Next Slide">Next Slide</button></li></ul></nav></header><div id="deck"><section><hgroup><h1>02. Форми</h1></hgroup></section><section>
<hgroup><h1>Форми</h1></hgroup>
<p>Основния таг е form и има няколко атрибута.</p><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">form</span> <span class="na">method</span><span class="o">=</span><span class="s">&quot;get&quot;</span> <span class="na">action</span><span class="o">=</span><span class="s">&quot;/url_to_handle_the_request&quot;</span><span class="p">&gt;</span>
  <span class="c">&lt;!--- ... ---&gt;</span>
<span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</pre>
</div>
<p>Изпраща GET заявка към http://localhost/url_to_handle_the_request</p></section>
<section>
<hgroup><h1>Method</h1></hgroup>
<ul><li class="action">GET
</li><li class="action">POST
</li><li class="action">PUT
</li><li class="action">DELETE</li></ul></section>
<section>
<hgroup><h1>Пример за форма</h1></hgroup>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">form</span> <span class="na">method</span><span class="o">=</span><span class="s">&quot;post&quot;</span> <span class="na">action</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;title&quot;</span><span class="p">&gt;</span>Заглавие<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;title&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;title&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;submit&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Запази&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</pre>
</div>
</section>
<section>
<hgroup><h1>Полета</h1></hgroup>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">form</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;post&quot;</span> <span class="na">action</span><span class="o">=</span><span class="s">&quot;/save_course&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;prepopulated&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Текстово поле&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;title&quot;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Заглавие&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;email&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;email_field&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;number&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;number_field&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;password&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;password_field&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;url&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;url_field&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;hidden&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;предварителнозададено&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;hidden_field&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</pre>
</div>
</section>
<section>
<hgroup><h1>Полета</h1></hgroup>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">form</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;group&quot;</span><span class="p">&gt;</span>Група<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">select</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;select&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;group&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;group&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;value1&quot;</span><span class="p">&gt;</span>ОКН<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;value2&quot;</span> <span class="na">selected</span><span class="p">&gt;</span>ЯКН<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;value3&quot;</span><span class="p">&gt;</span>ПМ<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">select</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">textarea</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;textarea&quot;</span> <span class="na">rows</span><span class="o">=</span><span class="s">&quot;10&quot;</span> <span class="na">cols</span><span class="o">=</span><span class="s">&quot;50&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;description&quot;</span><span class="p">&gt;</span>Описнаие<span class="p">&lt;/</span><span class="nt">textarea</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</pre>
</div>
</section>
<section>
<hgroup><h1>Полета</h1></hgroup>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">form</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;checkbox&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;homeworks&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;homeworks&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;homeworks&quot;</span><span class="p">&gt;</span>Домашни<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;checkbox&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;exam&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;exam&quot;</span> <span class="na">checked</span><span class="o">=</span><span class="s">&quot;checked&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;exam&quot;</span><span class="p">&gt;</span>Устен изпит<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</pre>
</div>
</section>
<section>
<hgroup><h1>Обработка на GET заявки</h1></hgroup>
<ul><li class="action">$_GET
</li><li class="action">Глобална променлива в PHP.
</li><li class="action">Асоциативен масив с променливи, предоставени на текущия скрипт посредством метода GET на HTTP.</li></ul></section>
<section>
<hgroup><h1>Обработка на GET заявки</h1></hgroup>
<p>http://localhost/?name=Misho</p><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="k">echo</span> <span class="s1">&#39;Welcome &#39;</span><span class="o">.</span><span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$_GET</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">])</span><span class="o">.</span><span class="s1">&#39;!&#39;</span><span class="p">;</span>
<span class="cp">?&gt;</span><span class="x"></span>
</pre>
</div>
<div class="highlight"><pre><span></span><span class="x">GET /index.php?name=Misho HTTP/1.1</span>
<span class="x">User-Agent: Mozilla/4.0 (compatible; MSIE5.01; Windows NT)</span>
<span class="x">Host: 127.0.0.1</span>
<span class="x">Accept-Language: en-us</span>
<span class="x">Accept-Encoding: gzip, deflate</span>
<span class="x">Connection: Keep-Alive</span>
</pre>
</div>
</section>
<section>
<hgroup><h1>Обработка на POST заявки</h1></hgroup>
<ul><li class="action">$_POST
</li><li class="action">Асоциативен масив с променливи, предоставени на текущия скрипт посредством метода POST на HTTP.</li></ul></section>
<section>
<hgroup><h1>Обработка на POST заявки</h1></hgroup>
<div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="k">echo</span> <span class="s1">&#39;Welcome &#39;</span><span class="o">.</span><span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">])</span><span class="o">.</span><span class="s1">&#39;!&#39;</span><span class="p">;</span>
<span class="cp">?&gt;</span><span class="x"></span>
</pre>
</div>
<div class="highlight"><pre><span></span><span class="x">POST /index.php HTTP/1.1</span>
<span class="x">User-Agent: Mozilla/4.0 (compatible; MSIE5.01; Windows NT)</span>
<span class="x">Host: 127.0.0.1</span>
<span class="x">Content-Type: application/x-www-form-urlencoded</span>
<span class="x">Content-Length: 68</span>
<span class="x">Accept-Language: en-us</span>
<span class="x">Accept-Encoding: gzip, deflate</span>
<span class="x">Connection: Keep-Alive</span>

<span class="x">title=WebGL&amp;credits=6&amp;group=3</span>
</pre>
</div>
</section>
<section>
<hgroup><h1>Добавяне на курсове</h1></hgroup>
<p>Искаме да направим форма за добавяне на специалност и създаваме файл resources/templates/add_course.hbs</p><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Добавяне на курс<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;utf-8&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Добавяне на курс<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">form</span> <span class="na">method</span><span class="o">=</span><span class="s">&quot;post&quot;</span> <span class="na">action</span><span class="o">=</span><span class="s">&quot;/add_course.php&quot;</span><span class="p">&gt;</span>
    <span class="c">&lt;!--- ... ---&gt;</span>
  <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre>
</div>
</section>
<section>
<hgroup><h1>Добавяне на курсове</h1></hgroup>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;title&quot;</span><span class="p">&gt;</span>Заглавие<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;title&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;title&quot;</span><span class="p">&gt;</span>
<span class="c">&lt;!--- ... ---&gt;</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;submit&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Добави&quot;</span><span class="p">&gt;</span>
</pre>
</div>
<p>Добавете всички полета които са нужни за описане на курс.</p></section>
<section>
<hgroup><h1>Обаботка на формуляр</h1></hgroup>
<div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
  <span class="nv">$clean_data</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
  <span class="nv">$errors</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>

  <span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$input_title</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$input_title</span> <span class="o">&amp;&amp;</span> <span class="nb">strlen</span><span class="p">(</span><span class="nv">$input_title</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">150</span><span class="p">)</span> <span class="p">{</span>
      <span class="nv">$clean_data</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$title</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nv">$errors</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Името е задължително поле с максимална дължина 150 символа.&#39;</span>
    <span class="p">}</span>
  <span class="p">}</span>
</pre>
</div>
</section>
<section>
<hgroup><h1>Валидация в големи проекти</h1></hgroup>
<div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="k">class</span> <span class="nc">Elective</span> <span class="k">extends</span> <span class="nx">CActiveRecord</span> <span class="p">{</span>
  <span class="k">public</span> <span class="k">function</span> <span class="nf">rules</span><span class="p">()</span>
  <span class="p">{</span>
    <span class="k">return</span> <span class="k">array</span><span class="p">(</span>
      <span class="k">array</span><span class="p">(</span><span class="s1">&#39;title, lecturer, status&#39;</span><span class="p">,</span> <span class="s1">&#39;required&#39;</span><span class="p">),</span>
      <span class="k">array</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;length&#39;</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="o">=&gt;</span><span class="mi">128</span><span class="p">),</span>
      <span class="k">array</span><span class="p">(</span><span class="s1">&#39;lecturer&#39;</span><span class="p">,</span> <span class="s1">&#39;length&#39;</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="o">=&gt;</span><span class="mi">150</span><span class="p">),</span>
      <span class="k">array</span><span class="p">(</span><span class="s1">&#39;status&#39;</span><span class="p">,</span> <span class="s1">&#39;in&#39;</span><span class="p">,</span> <span class="s1">&#39;range&#39;</span><span class="o">=&gt;</span><span class="k">array</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)),</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre>
</div>
</section>
<section>
<hgroup><h1>Задача</h1></hgroup>
<p>Направете форма за добавяне на избираеми дисциплини и сървърна част, която да показва, валидира и записва формата. Тя трябва да съдържа:</p><ul><li>Име на предмета - задължително, с максимална дължина - 150 символа</li><li>Преподавател - задължително, с максимална дължина - 200 символа</li><li>Описание - задължително, минимална дължина - 10 символа</li><li>Група - една измежду М, ПМ, ОКН и ЯКН</li><li>Кредити - цяло положително число</li></ul><p>Всяко поле трябва да отговаря на посочения тип и да има валидация по зададените правила.</p><p>Вашето решение трябва да представлява архив на проекта с всички необходими файлове в него.</p></section>
</div><script src="js/jquery-1.5.2.min.js"></script><script src="js/jquery.jswipe-0.1.2.js"></script><script src="js/htmlSlides.js"></script><script src="js/pusher.js"></script><script type="text/javascript">$(function() {
  htmlSlides.init({ hideToolbar: true });
});

var pusher = new Pusher('a2024b659f492cab86cc');
pusher.subscribe('lectures');
pusher.bind('refresh', function(data) {
  location.reload(true);
});

try {
  mixpanel.track('Landing Page', {
    referrer: document.referrer,
    presentation: document.title
  });
} catch (e) {};</script></body></html>